<?php
/**
 * Copyright ï¿½ 2015 Magento. All rights reserved.
 * See COPYING.txt for license details.
 */

$ProductGiftData = $block->getFreeGiftCatalog();
if(count($ProductGiftData) > 0):
?>

<script type="text/javascript">
    hasGiftProduct = false;
</script>

<div class="mw-fg-catalog-list mw-fg-catalog-product fieldset">
     <div class="field">
        <label class="label">
            <span>Free Gift</span>
        </label>

        <div class="freegift_catalog_container clearer control">
            <ul id="freegift">
                <?php foreach($ProductGiftData as $giftData):
                    if($giftData['rule_gift_ids'] != ""):
                    $product = $block->getProductGiftData($giftData['rule_gift_ids']);
                    if($product->isSaleable()) :
                ?>
                <li class="mw-fg-items">
                    <a id="stay-target-<?php echo $giftData['rule_id'].'_'.$block->getCurrentProduct()->getId().'_'.$giftData['rule_gift_ids']; ?>" href="<?php echo $product->getProductUrl(); ?>" title="<?php echo $block->escapeHtml($product->getName()); ?>" class="product-image">
                        <img src="<?php echo $this->helper('Magento\Catalog\Helper\Image')->init($product, 'category_page_list')->constrainOnly(TRUE)->keepAspectRatio(TRUE)->keepFrame(TRUE)->resize(75,75)->getUrl(); ?>" alt="" height="75" width="75">
                    </a>
                    <div style="display: none;" id="stay-content-<?php echo $giftData['rule_id'].'_'.$block->getCurrentProduct()->getId().'_'.$giftData['rule_gift_ids']; ?>" class="mw-fg-item">
                        <div class="mw-fg-item-options">
                            <div class="mw-fg-item-option-title"><?php echo $giftData['name'] ?></div>
                            <div class="mw-fg-item-option-ct">
                                <p class="mw-fg-image-item">
                                    <a href="<?php echo $product->getProductUrl(); ?>" title="<?php echo $block->escapeHtml($product->getName()); ?>">
                                        <img src="<?php echo $this->helper('Magento\Catalog\Helper\Image')->init($product, 'category_page_list')->constrainOnly(TRUE)->keepAspectRatio(TRUE)->keepFrame(TRUE)->resize(135,150)->getUrl(); ?>" alt="" height="135" width="150">
                                    </a>
                                </p>
                                <p class="mw-fg-item-name">
                                    <a href="<?php echo $product->getProductUrl(); ?>" title="<?php echo $block->escapeHtml($product->getName()); ?>"><?php echo $block->escapeHtml($product->getName()); ?></a>
                                </p>
                            </div>
                        </div>
                    </div>
                </li>
                <?php endif; ?>
                <?php endif; ?>
                <?php endforeach; ?>
            </ul>
            <div style="clear: both;"></div>
        </div>
     </div>
</div>
<?php endif; ?>